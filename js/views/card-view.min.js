var app=app||{},todos=[];!function(t){app.CardView=Backbone.View.extend({tagName:"section",className:"card",template:_.template(t("#card-template").html()),events:{"tap .add-button":"create"},initialize:function(e,a){var i=["today","later","schedule"];this.collection=e,this.$el.html(this.template({category:a,categoryName:i[a]})),this.$el.addClass(i[a]),t("#todoapp").append(this.el),this.listenTo(e,"add",this.addOne),this.listenTo(e,"sort",this.addAll),this.collection.sort()},addAll:function(){this.$el.children(".todo-list").html(""),this.collection.each(this.addOne,this)},addOne:function(t){var e=new app.TodoView({model:t});this.$el.children(".todo-list").append(e.render().el)},newAttributes:function(e){return{content:"",completed:!1,order:this.collection.nextOrder(),category_id:t(e.target).attr("data-category")}},create:function(e){this.collection.add(this.newAttributes(e)),t(this.$el.find("label")[this.$el.find("label").length-1]).trigger("tap")}})}($);